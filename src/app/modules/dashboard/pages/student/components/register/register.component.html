<mat-card class="container">
    <app-spinner *ngIf="spinner"></app-spinner>
    <mat-card-header>
        <mat-card-title>Registrar estudiante</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Nombre</mat-label>
            <input matInput [(ngModel)]="toRegisterStudent.name" [formControl]="formControl_name" />
            <mat-error *ngIf="formControl_name.invalid">{{utilService.validateFormControl(formControl_name)}}</mat-error>
        </mat-form-field>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Apellido</mat-label>
            <input matInput [(ngModel)]="toRegisterStudent.lastName" [formControl]="formControl_lastName" required />
            <mat-error *ngIf="formControl_lastName.invalid">{{utilService.validateFormControl(formControl_lastName)}}</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" style="margin-bottom: 1rem;">
            <mat-label>Tipo de documento</mat-label>
            <mat-select [formControl]="formControl_documentType" [(value)]="toRegisterStudent.documentTypeId">
                <mat-option *ngFor="let documentType of retrievedDocumentTypes" [value]="documentType.id">
                    {{documentType.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Documento</mat-label>
            <input type="number" matInput [(ngModel)]="toRegisterStudent.document" [formControl]="formControl_document" required />
            <mat-error *ngIf="formControl_document.invalid">{{utilService.validateFormControl(formControl_document)}}</mat-error>
        </mat-form-field>
        <mat-form-field class="example-full-width" appearance="fill" style="margin-bottom: 1rem;">
            <mat-label>Fecha de nacimiento</mat-label>
            <input matInput [(ngModel)]="toRegisterStudent.birthDate" [formControl]="formControl_birthDate" [matDatepickerFilter]="birthDateYearFilter" (click)="picker.open()" [matDatepicker]="picker">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Código</mat-label>
            <input type="number" matInput [(ngModel)]="toRegisterStudent.code" [formControl]="formControl_code" required />
            <mat-error *ngIf="formControl_code.invalid">{{utilService.validateFormControl(formControl_code)}}</mat-error>
        </mat-form-field>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Correo personal</mat-label>
            <input matInput [(ngModel)]="toRegisterStudent.personalMail" [formControl]="formControl_personalMail" required />
            <mat-error *ngIf="formControl_personalMail.invalid">{{utilService.validateFormControl(formControl_personalMail)}}</mat-error>
        </mat-form-field>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Correo institucional</mat-label>
            <input matInput [(ngModel)]="toRegisterStudent.instituteMail" [formControl]="formControl_instituteMail" required />
            <mat-error *ngIf="formControl_instituteMail.invalid">{{utilService.validateFormControl(formControl_instituteMail)}}</mat-error>
        </mat-form-field>
        <mat-form-field style="margin-bottom: 1rem;">
            <mat-label>Teléfono</mat-label>
            <input type="number" matInput [(ngModel)]="toRegisterStudent.cellPhone" [formControl]="formControl_cellPhone" required />
            <mat-error *ngIf="formControl_cellPhone.invalid">{{utilService.validateFormControl(formControl_cellPhone)}}</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Proyecto curricular</mat-label>
            <mat-select [formControl]="formControl_curriculumProject" [(value)]="toRegisterStudent.proyectId">
                <mat-option *ngFor="let proyect of retrievedCurriculumProyects" [value]="proyect.id">
                    {{proyect.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </mat-card-content>
    <mat-card-actions>
        <button mat-fab extended color="primary" [disabled]="spinner || !areValidFields()" (click)="registerStudent()">
            <mat-icon>person_add</mat-icon>
            Registrar estudiante
        </button>
      </mat-card-actions>
    <app-spinner *ngIf="spinner" class="absolute"></app-spinner>
</mat-card>